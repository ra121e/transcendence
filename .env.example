# Environment Configuration Template for Extensible Web App
# Copy this file to .env and modify values as needed for your environment
# 
# Usage: 
#   1. Copy: cp .env.example .env
#   2. Edit: nano .env (or your preferred editor)
#   3. Deploy: docker compose up -d

# =============================================================================
# WEB SERVER CONFIGURATION
# =============================================================================

# Port mapping for web server (host:container)
# Default: 8080:80 (access via http://localhost:8080)
WEB_PORT=8080

# Nginx worker process configuration
# auto = number of CPU cores, or specify a number (e.g., 2, 4)
NGINX_WORKER_PROCESSES=auto

# Maximum number of simultaneous connections per worker process
# Increase for high-traffic scenarios
NGINX_WORKER_CONNECTIONS=1024

# Enable/disable gzip compression (on/off)
# Reduces bandwidth usage for text-based content
NGINX_GZIP=on

# Gzip compression level (1-9, higher = better compression, more CPU)
NGINX_GZIP_LEVEL=6

# =============================================================================
# CONTAINER CONFIGURATION
# =============================================================================

# Docker container name
# Must be unique across your Docker environment
CONTAINER_NAME=extensible-web-app

# Container restart policy
# Options: no, always, unless-stopped, on-failure
RESTART_POLICY=unless-stopped

# Health check configuration
# Interval between health checks (seconds)
HEALTH_CHECK_INTERVAL=30s

# Health check timeout (seconds)
HEALTH_CHECK_TIMEOUT=10s

# Number of consecutive failures before marking unhealthy
HEALTH_CHECK_RETRIES=3

# Time to wait before starting health checks (seconds)
HEALTH_CHECK_START_PERIOD=60s

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# Security headers (enabled by default in nginx.conf)
# Set to 'off' to disable specific headers if needed

# X-Frame-Options header (DENY, SAMEORIGIN, or ALLOW-FROM uri)
SECURITY_FRAME_OPTIONS=SAMEORIGIN

# X-Content-Type-Options header (nosniff)
SECURITY_CONTENT_TYPE_OPTIONS=nosniff

# X-XSS-Protection header (1; mode=block)
SECURITY_XSS_PROTECTION="1; mode=block"

# =============================================================================
# PERFORMANCE CONFIGURATION
# =============================================================================

# Static asset cache duration (for CSS, JS, images)
# Format: 1y (1 year), 30d (30 days), 24h (24 hours)
STATIC_CACHE_DURATION=1y

# Enable/disable sendfile for static content (on/off)
# Improves performance for serving static files
NGINX_SENDFILE=on

# TCP optimization settings
NGINX_TCP_NOPUSH=on
NGINX_TCP_NODELAY=on

# Keep-alive timeout for client connections (seconds)
NGINX_KEEPALIVE_TIMEOUT=65

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================

# Log level for nginx error log
# Options: debug, info, notice, warn, error, crit, alert, emerg
NGINX_LOG_LEVEL=error

# Enable/disable access logging (on/off)
# Set to 'off' to disable access logs for performance
NGINX_ACCESS_LOG=on

# =============================================================================
# DEVELOPMENT CONFIGURATION
# =============================================================================

# Development mode settings
# Set to 'true' for development, 'false' for production
DEVELOPMENT_MODE=false

# Enable detailed error pages in development
# Shows detailed error information (security risk in production)
DEVELOPMENT_ERROR_PAGES=false

# =============================================================================
# FUTURE EXTENSIONS (Phase 2+)
# =============================================================================
# These variables are placeholders for future feature development
# Uncomment and configure when adding backend services

# Database Configuration
# DATABASE_URL=postgresql://username:password@database:5432/extensible_web_app
# DATABASE_HOST=database
# DATABASE_PORT=5432
# DATABASE_NAME=extensible_web_app
# DATABASE_USER=app_user
# DATABASE_PASSWORD=secure_password_here

# Redis Cache Configuration
# REDIS_URL=redis://redis:6379/0
# REDIS_HOST=redis
# REDIS_PORT=6379
# REDIS_PASSWORD=redis_password_here

# Backend API Configuration
# API_BASE_URL=http://api:3000
# API_HOST=api
# API_PORT=3000
# API_SECRET_KEY=your_api_secret_key_here

# External Service Configuration
# EXTERNAL_API_KEY=your_external_api_key
# EXTERNAL_API_URL=https://api.external-service.com
# WEBHOOK_SECRET=your_webhook_secret

# Email Configuration (for future notifications)
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-email@gmail.com
# SMTP_PASSWORD=your_app_password
# FROM_EMAIL=noreply@your-domain.com

# =============================================================================
# ENVIRONMENT-SPECIFIC OVERRIDES
# =============================================================================

# Environment identifier (development, staging, production)
ENVIRONMENT=development

# Domain configuration (for production deployment)
# DOMAIN=your-domain.com
# SSL_CERT_PATH=/etc/ssl/certs/your-domain.crt
# SSL_KEY_PATH=/etc/ssl/private/your-domain.key

# =============================================================================
# CONFIGURATION NOTES
# =============================================================================
#
# 1. SECURITY: Never commit .env files to version control
#    Add .env to your .gitignore file
#
# 2. VALIDATION: Use the provided validation scripts to check configuration:
#    PowerShell: tests/validate-deployment-config.ps1
#    Bash: tests/test-deployment.sh
#
# 3. TESTING: Run property-based tests after configuration changes:
#    npm run test:property
#
# 4. BACKUP: Keep backup copies of working .env configurations
#
# 5. DOCUMENTATION: Update this template when adding new configuration options
#
# 6. DEFAULTS: Most settings have sensible defaults in docker-compose.yml and nginx.conf
#    Only override when necessary for your specific environment
#